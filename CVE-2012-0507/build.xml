<?xml version="1.0" encoding="UTF-8"?>
<project name="jvmhack" basedir="." default="all">
	<property name="src" value="." />
	<property name="classes" value="target/classes" />
	<property name="dist" value="target/dist" />
	<property name="classes.encode" value="GBK" />
	<property environment="env"/>
	<property name="jdk_home" value="${env.JAVA_HOME}" />
	<property name="lib" value="target/lib" />


	<path id="classpath">
	</path>
	<target name="init">
		<tstamp />
	</target>

	<target name="policycompile" depends="init">
		<echo message="start compile ....." />
		<delete dir="${classes}" />
		<mkdir dir="${classes}" />
		<javac deprecation="on" debug="off"  encoding="${classes.encode}" nowarn="true"
			srcdir="${src}" 
			destdir="${classes}" 
			classpathref="classpath" >
			<include name="redcreen/MyPolicy.java"/>
			<include name="redcreen/PolicyHelper.java"/>
		</javac>
	</target>

	<target name="policyjar" depends="policycompile">
		<echo message="start export jar ....." />
		<mkdir dir="${dist}" />
		<jar jarfile="${dist}/redcreen.policy.jar" basedir="${classes}" />
	</target>
	
	<target name="helpbyte" depends="init">
		<echo message="start compile ....." />
		<delete dir="${classes}" />
		<mkdir dir="${classes}" />
		<javac deprecation="on" debug="off"  encoding="${classes.encode}" nowarn="true"
			srcdir="${src}" 
			destdir="${classes}" 
			classpathref="classpath" >
			<include name="redcreen/HelpByteGenerator.java"/>
		</javac>
	</target>
	
	<target name="exploitcompile" depends="init">
		<echo message="start compile ....." />
		<delete dir="${classes}" />
		<mkdir dir="${classes}" />
		<javac deprecation="on" debug="off"  encoding="${classes.encode}" nowarn="true"
			srcdir="${src}" 
			destdir="${classes}" 
			classpathref="classpath" >
			<include name="redcreen/ExpFile.java"/>
			<include name="redcreen/Exploit.java"/>
			<include name="redcreen/Help.java"/>
		</javac>
	</target>

	<target name="exploitjar" depends="exploitcompile">
		<echo message="start export jar ....." />
		
		<mkdir dir="${dist}" />
		<jar jarfile="${dist}/redcreen.exploit.jar" basedir="${classes}" />
	</target>
	
	<target name="all" depends="policyjar,exploitjar">
	</target>
	
</project>
